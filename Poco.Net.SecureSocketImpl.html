<!DOCTYPE html>
<html>
<head>
<title>Class Poco::Net::SecureSocketImpl</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="author" content="Applied Informatics Software Engineering GmbH and Contributors"/>
<meta name="generator" content="PocoDoc"/>
<link rel="stylesheet" href="css/styles.css" type="text/css"/>
<script type="text/javascript" src="js/iframeResizer.min.js"></script>
<script type="text/javascript" src="js/CollapsibleLists.compressed.js"></script>
</head>
<body>
<div class="header">
<h1 class="namespace"><a href="Poco.Net.html" class="namespace">Poco::Net</a></h1>
<h1 class="symbol">class SecureSocketImpl</h1>
</div>
<div class="body">
<div id="navigation">
<iframe src="navigation.html?expand=library-NetSSL_OpenSSL" onload="iFrameResize(this);" scrolling="no"></iframe>
</div>
<div id="content">
<p>
<b>Library:</b> NetSSL_OpenSSL<br />
<b>Package:</b> SSLSockets<br />
<b>Header:</b> Poco/Net/SecureSocketImpl.h</p>
<h2>Description</h2>
<div class="description">
<p>The <a href="Poco.Net.SocketImpl.html" title="class Poco::Net::SocketImpl">SocketImpl</a> for <a href="Poco.Net.SecureStreamSocket.html" title="class Poco::Net::SecureStreamSocket">SecureStreamSocket</a>. </p>
</div>
<h2>Member Summary</h2>
<p><b>Member Functions: </b><a href="Poco.Net.SecureSocketImpl.html#26784" title="Poco::Net::SecureSocketImpl::abort()">abort</a>, <a href="Poco.Net.SecureSocketImpl.html#26766" title="Poco::Net::SecureSocketImpl::acceptConnection()">acceptConnection</a>, <a href="Poco.Net.SecureSocketImpl.html#26808" title="Poco::Net::SecureSocketImpl::acceptSSL()">acceptSSL</a>, <a href="Poco.Net.SecureSocketImpl.html#26793" title="Poco::Net::SecureSocketImpl::available()">available</a>, <a href="Poco.Net.SecureSocketImpl.html#26777" title="Poco::Net::SecureSocketImpl::bind()">bind</a>, <a href="Poco.Net.SecureSocketImpl.html#26783" title="Poco::Net::SecureSocketImpl::close()">close</a>, <a href="Poco.Net.SecureSocketImpl.html#26794" title="Poco::Net::SecureSocketImpl::completeHandshake()">completeHandshake</a>, <a href="Poco.Net.SecureSocketImpl.html#26768" title="Poco::Net::SecureSocketImpl::connect()">connect</a>, <a href="Poco.Net.SecureSocketImpl.html#26775" title="Poco::Net::SecureSocketImpl::connectNB()">connectNB</a>, <a href="Poco.Net.SecureSocketImpl.html#26809" title="Poco::Net::SecureSocketImpl::connectSSL()">connectSSL</a>, <a href="Poco.Net.SecureSocketImpl.html#26797" title="Poco::Net::SecureSocketImpl::context()">context</a>, <a href="Poco.Net.SecureSocketImpl.html#26804" title="Poco::Net::SecureSocketImpl::currentSession()">currentSession</a>, <a href="Poco.Net.SecureSocketImpl.html#26803" title="Poco::Net::SecureSocketImpl::getPeerHostName()">getPeerHostName</a>, <a href="Poco.Net.SecureSocketImpl.html#26817" title="Poco::Net::SecureSocketImpl::handleError()">handleError</a>, <a href="Poco.Net.SecureSocketImpl.html#26813" title="Poco::Net::SecureSocketImpl::isLocalHost()">isLocalHost</a>, <a href="Poco.Net.SecureSocketImpl.html#26780" title="Poco::Net::SecureSocketImpl::listen()">listen</a>, <a href="Poco.Net.SecureSocketImpl.html#26815" title="Poco::Net::SecureSocketImpl::mustRetry()">mustRetry</a>, <a href="Poco.Net.SecureSocketImpl.html#26796" title="Poco::Net::SecureSocketImpl::peerCertificate()">peerCertificate</a>, <a href="Poco.Net.SecureSocketImpl.html#26789" title="Poco::Net::SecureSocketImpl::receiveBytes()">receiveBytes</a>, <a href="Poco.Net.SecureSocketImpl.html#26819" title="Poco::Net::SecureSocketImpl::reset()">reset</a>, <a href="Poco.Net.SecureSocketImpl.html#26785" title="Poco::Net::SecureSocketImpl::sendBytes()">sendBytes</a>, <a href="Poco.Net.SecureSocketImpl.html#26807" title="Poco::Net::SecureSocketImpl::sessionWasReused()">sessionWasReused</a>, <a href="Poco.Net.SecureSocketImpl.html#26801" title="Poco::Net::SecureSocketImpl::setPeerHostName()">setPeerHostName</a>, <a href="Poco.Net.SecureSocketImpl.html#26782" title="Poco::Net::SecureSocketImpl::shutdown()">shutdown</a>, <a href="Poco.Net.SecureSocketImpl.html#26795" title="Poco::Net::SecureSocketImpl::sockfd()">sockfd</a>, <a href="Poco.Net.SecureSocketImpl.html#26805" title="Poco::Net::SecureSocketImpl::useSession()">useSession</a>, <a href="Poco.Net.SecureSocketImpl.html#26798" title="Poco::Net::SecureSocketImpl::verifyPeerCertificate()">verifyPeerCertificate</a>, <a href="Poco.Net.SecureSocketImpl.html#26811" title="Poco::Net::SecureSocketImpl::verifyPeerCertificateImpl()">verifyPeerCertificateImpl</a></p>
<h2>Constructors</h2>
<h3><a id="26762">SecureSocketImpl</a></h3>
<p class="decl"><a href="Poco.Net.SecureSocketImpl.html" title="class Poco::Net::SecureSocketImpl">SecureSocketImpl</a>(<br />&nbsp;&nbsp;&nbsp;&nbsp;<a href="Poco.AutoPtr.html" title="class Poco::AutoPtr">Poco::AutoPtr</a> &lt; <a href="Poco.Net.SocketImpl.html" title="class Poco::Net::SocketImpl">SocketImpl</a> &gt; pSocketImpl,<br />&nbsp;&nbsp;&nbsp;&nbsp;<a href="Poco.Net.Context.html#26229" title="Poco::Net::Context::Ptr">Context::Ptr</a> pContext<br />);</p>
<div class="description">
<p>Creates the <a href="Poco.Net.SecureSocketImpl.html" title="class Poco::Net::SecureSocketImpl">SecureSocketImpl</a> using an already connected stream socket. </p>
</div>
<h2>Destructor</h2>
<h3><a id="26765">~SecureSocketImpl</a> <img src="images/virtual.png" alt="virtual" title="virtual" class="icon" /> </h3>
<p class="decl">virtual ~<a href="Poco.Net.SecureSocketImpl.html" title="class Poco::Net::SecureSocketImpl">SecureSocketImpl</a>();</p>
<div class="description">
<p>Destroys the <a href="Poco.Net.SecureSocketImpl.html" title="class Poco::Net::SecureSocketImpl">SecureSocketImpl</a>. </p>
</div>
<h2>Member Functions</h2>
<h3><a id="26784">abort</a></h3>
<p class="decl">void abort();</p>
<div class="description">
<p>Aborts the connection by closing the underlying TCP connection. No orderly SSL shutdown is performed. </p>
</div>
<h3><a id="26766">acceptConnection</a></h3>
<p class="decl"><a href="Poco.Net.SocketImpl.html" title="class Poco::Net::SocketImpl">SocketImpl</a> * acceptConnection(<br />&nbsp;&nbsp;&nbsp;&nbsp;<a href="Poco.Net.SocketAddress.html" title="class Poco::Net::SocketAddress">SocketAddress</a> &amp; clientAddr<br />);</p>
<div class="description">
<p>Get the next completed connection from the socket's completed connection queue. </p>
<p>If the queue is empty, waits until a connection request completes. </p>
<p>Returns a new SSL socket for the connection with the client. </p>
<p>The client socket's address is returned in clientAddr. </p>
</div>
<h3><a id="26793">available</a></h3>
<p class="decl">int available() const;</p>
<div class="description">
<p>Returns the number of bytes available from the SSL buffer for immediate reading. </p>
</div>
<h3><a id="26777">bind</a></h3>
<p class="decl">void bind(<br />&nbsp;&nbsp;&nbsp;&nbsp;const <a href="Poco.Net.SocketAddress.html" title="class Poco::Net::SocketAddress">SocketAddress</a> &amp; address,<br />&nbsp;&nbsp;&nbsp;&nbsp;bool reuseAddress = false<br />);</p>
<div class="description">
<p>Bind a local address to the socket. </p>
<p>This is usually only done when establishing a server socket. SSL clients should not bind a socket to a specific address. </p>
<p>If reuseAddress is true, sets the SO_REUSEADDR socket option. </p>
</div>
<h3><a id="26783">close</a></h3>
<p class="decl">void close();</p>
<div class="description">
<p>Close the socket. </p>
</div>
<h3><a id="26794">completeHandshake</a></h3>
<p class="decl">int completeHandshake();</p>
<div class="description">
<p>Completes the SSL handshake. </p>
<p>If the SSL connection was the result of an accept(), the server-side handshake is completed, otherwise a client-side handshake is performed.  </p>
</div>
<h3><a id="26768">connect</a></h3>
<p class="decl">void connect(<br />&nbsp;&nbsp;&nbsp;&nbsp;const <a href="Poco.Net.SocketAddress.html" title="class Poco::Net::SocketAddress">SocketAddress</a> &amp; address,<br />&nbsp;&nbsp;&nbsp;&nbsp;bool performHandshake<br />);</p>
<div class="description">
<p>Initializes the socket and establishes a secure connection to  the TCP server at the given address. </p>
<p>If performHandshake is true, the SSL handshake is performed immediately  after establishing the connection. Otherwise, the handshake is performed the first time <a href="Poco.Net.SecureSocketImpl.html#26785" title="Poco::Net::SecureSocketImpl::sendBytes()">sendBytes</a>(), <a href="Poco.Net.SecureSocketImpl.html#26789" title="Poco::Net::SecureSocketImpl::receiveBytes()">receiveBytes</a>() or <a href="Poco.Net.SecureSocketImpl.html#26794" title="Poco::Net::SecureSocketImpl::completeHandshake()">completeHandshake</a>() is called. </p>
</div>
<h3><a id="26771">connect</a></h3>
<p class="decl">void connect(<br />&nbsp;&nbsp;&nbsp;&nbsp;const <a href="Poco.Net.SocketAddress.html" title="class Poco::Net::SocketAddress">SocketAddress</a> &amp; address,<br />&nbsp;&nbsp;&nbsp;&nbsp;const <a href="Poco.Timespan.html" title="class Poco::Timespan">Poco::Timespan</a> &amp; timeout,<br />&nbsp;&nbsp;&nbsp;&nbsp;bool performHandshake<br />);</p>
<div class="description">
<p>Initializes the socket, sets the socket timeout and  establishes a secure connection to the TCP server at the given address. </p>
<p>If performHandshake is true, the SSL handshake is performed immediately  after establishing the connection. Otherwise, the handshake is performed the first time <a href="Poco.Net.SecureSocketImpl.html#26785" title="Poco::Net::SecureSocketImpl::sendBytes()">sendBytes</a>(), <a href="Poco.Net.SecureSocketImpl.html#26789" title="Poco::Net::SecureSocketImpl::receiveBytes()">receiveBytes</a>() or <a href="Poco.Net.SecureSocketImpl.html#26794" title="Poco::Net::SecureSocketImpl::completeHandshake()">completeHandshake</a>() is called. </p>
</div>
<h3><a id="26775">connectNB</a></h3>
<p class="decl">void connectNB(<br />&nbsp;&nbsp;&nbsp;&nbsp;const <a href="Poco.Net.SocketAddress.html" title="class Poco::Net::SocketAddress">SocketAddress</a> &amp; address<br />);</p>
<div class="description">
<p>Initializes the socket and establishes a secure connection to  the TCP server at the given address. Prior to opening the connection the socket is set to nonblocking mode. </p>
</div>
<h3><a id="26797">context</a> <img src="images/inline.png" alt="inline" title="inline" class="icon" /> </h3>
<p class="decl"><a href="Poco.Net.Context.html#26229" title="Poco::Net::Context::Ptr">Context::Ptr</a> context() const;</p>
<div class="description">
<p>Returns the SSL context used for this socket. </p>
</div>
<h3><a id="26804">currentSession</a></h3>
<p class="decl"><a href="Poco.Net.Session.html#26990" title="Poco::Net::Session::Ptr">Session::Ptr</a> currentSession();</p>
<div class="description">
<p>Returns the SSL session of the current connection, for reuse in a future connection (if session caching is enabled). </p>
<p>If no connection is established, returns null. </p>
</div>
<h3><a id="26803">getPeerHostName</a> <img src="images/inline.png" alt="inline" title="inline" class="icon" /> </h3>
<p class="decl">const std::string &amp; getPeerHostName() const;</p>
<div class="description">
<p>Returns the peer host name. </p>
</div>
<h3><a id="26780">listen</a></h3>
<p class="decl">void listen(<br />&nbsp;&nbsp;&nbsp;&nbsp;int backlog = 64<br />);</p>
<div class="description">
<p>Puts the socket into listening state. </p>
<p>The socket becomes a passive socket that can accept incoming connection requests. </p>
<p>The backlog argument specifies the maximum number of connections that can be queued for this socket. </p>
</div>
<h3><a id="26796">peerCertificate</a></h3>
<p class="decl">X509 * peerCertificate() const;</p>
<div class="description">
<p>Returns the peer's certificate. </p>
</div>
<h3><a id="26789">receiveBytes</a></h3>
<p class="decl">int receiveBytes(<br />&nbsp;&nbsp;&nbsp;&nbsp;void * buffer,<br />&nbsp;&nbsp;&nbsp;&nbsp;int length,<br />&nbsp;&nbsp;&nbsp;&nbsp;int flags = 0<br />);</p>
<div class="description">
<p>Receives data from the socket and stores it in buffer. Up to length bytes are received. </p>
<p>Returns the number of bytes received. </p>
</div>
<h3><a id="26785">sendBytes</a></h3>
<p class="decl">int sendBytes(<br />&nbsp;&nbsp;&nbsp;&nbsp;const void * buffer,<br />&nbsp;&nbsp;&nbsp;&nbsp;int length,<br />&nbsp;&nbsp;&nbsp;&nbsp;int flags = 0<br />);</p>
<div class="description">
<p>Sends the contents of the given buffer through the socket. <a href="Poco.Any.html" title="class Poco::Any">Any</a> specified flags are ignored. </p>
<p>Returns the number of bytes sent, which may be less than the number of bytes specified. </p>
</div>
<h3><a id="26807">sessionWasReused</a></h3>
<p class="decl">bool sessionWasReused();</p>
<div class="description">
<p>Returns true if and only if a reused session was negotiated during the handshake. </p>
</div>
<h3><a id="26801">setPeerHostName</a></h3>
<p class="decl">void setPeerHostName(<br />&nbsp;&nbsp;&nbsp;&nbsp;const std::string &amp; hostName<br />);</p>
<div class="description">
<p>Sets the peer host name for certificate validation purposes. </p>
</div>
<h3><a id="26782">shutdown</a></h3>
<p class="decl">void shutdown();</p>
<div class="description">
<p>Shuts down the connection by attempting an orderly SSL shutdown, then actually shutting down the TCP connection. </p>
</div>
<h3><a id="26795">sockfd</a> <img src="images/inline.png" alt="inline" title="inline" class="icon" /> </h3>
<p class="decl">int sockfd();</p>
<div class="description">
<p>Returns the underlying socket descriptor. </p>
</div>
<h3><a id="26805">useSession</a></h3>
<p class="decl">void useSession(<br />&nbsp;&nbsp;&nbsp;&nbsp;<a href="Poco.Net.Session.html#26990" title="Poco::Net::Session::Ptr">Session::Ptr</a> pSession<br />);</p>
<div class="description">
<p>Sets the SSL session to use for the next connection. Setting a previously saved <a href="Poco.Net.Session.html" title="class Poco::Net::Session">Session</a> object is necessary to enable session caching. </p>
<p>To remove the currently set session, a null pointer can be given. </p>
<p>Must be called before <a href="Poco.Net.SecureSocketImpl.html#26768" title="Poco::Net::SecureSocketImpl::connect()">connect</a>() to be effective. </p>
</div>
<h3><a id="26798">verifyPeerCertificate</a></h3>
<p class="decl">void verifyPeerCertificate();</p>
<div class="description">
<p>Performs post-connect (or post-accept) peer certificate validation, using the peer host name set with <a href="Poco.Net.SecureSocketImpl.html#26801" title="Poco::Net::SecureSocketImpl::setPeerHostName()">setPeerHostName</a>(), or the peer's IP address string if no peer host name has been set. </p>
</div>
<h3><a id="26799">verifyPeerCertificate</a></h3>
<p class="decl">void verifyPeerCertificate(<br />&nbsp;&nbsp;&nbsp;&nbsp;const std::string &amp; hostName<br />);</p>
<div class="description">
<p>Performs post-connect (or post-accept) peer certificate validation using the given peer host name. </p>
</div>
<h3><a id="26808">acceptSSL</a> <img src="images/protected.png" alt="protected" title="protected" class="icon" /> </h3>
<p class="decl">void acceptSSL();</p>
<div class="description">
<p>Performs a server-side SSL handshake and certificate verification. </p>
</div>
<h3><a id="26809">connectSSL</a> <img src="images/protected.png" alt="protected" title="protected" class="icon" /> </h3>
<p class="decl">void connectSSL(<br />&nbsp;&nbsp;&nbsp;&nbsp;bool performHandshake<br />);</p>
<div class="description">
<p>Performs a client-side SSL handshake and establishes a secure  connection over an already existing TCP connection. </p>
</div>
<h3><a id="26817">handleError</a> <img src="images/protected.png" alt="protected" title="protected" class="icon" /> </h3>
<p class="decl">int handleError(<br />&nbsp;&nbsp;&nbsp;&nbsp;int rc<br />);</p>
<div class="description">
<p>Handles an SSL error by throwing an appropriate exception. </p>
</div>
<h3><a id="26813">isLocalHost</a> <img src="images/protected.png" alt="protected" title="protected" class="icon" />  <img src="images/static.png" alt="static" title="static" class="icon" /> </h3>
<p class="decl">static bool isLocalHost(<br />&nbsp;&nbsp;&nbsp;&nbsp;const std::string &amp; hostName<br />);</p>
<div class="description">
<p>Returns true if and only if the given host name is the local host  (either &quot;localhost&quot; or &quot;127.0.0.1&quot;). </p>
</div>
<h3><a id="26815">mustRetry</a> <img src="images/protected.png" alt="protected" title="protected" class="icon" /> </h3>
<p class="decl">bool mustRetry(<br />&nbsp;&nbsp;&nbsp;&nbsp;int rc<br />);</p>
<div class="description">
<p>Returns true if the last operation should be retried, otherwise false. </p>
<p>In case of an SSL_ERROR_WANT_READ error, and if the socket is  blocking, waits for the underlying socket to become readable. </p>
<p>In case of an SSL_ERROR_WANT_WRITE error, and if the socket is blocking, waits for the underlying socket to become writable. </p>
<p>Can also throw a <a href="Poco.TimeoutException.html" title="class Poco::TimeoutException">Poco::TimeoutException</a> if the socket does not become readable or writable within the sockets receive or send timeout. </p>
</div>
<h3><a id="26819">reset</a> <img src="images/protected.png" alt="protected" title="protected" class="icon" /> </h3>
<p class="decl">void reset();</p>
<div class="description">
<p>Prepares the socket for re-use.  </p>
<p>After closing and resetting a socket, the socket can be used for a new connection. </p>
<p>Note that simply closing a socket is not sufficient to be able to re-use it again. </p>
</div>
<h3><a id="26811">verifyPeerCertificateImpl</a> <img src="images/protected.png" alt="protected" title="protected" class="icon" /> </h3>
<p class="decl">long verifyPeerCertificateImpl(<br />&nbsp;&nbsp;&nbsp;&nbsp;const std::string &amp; hostName<br />);</p>
<div class="description">
<p>Performs post-connect (or post-accept) peer certificate validation. </p>
</div>
<p class="footer">POCO C++ Libraries 1.9.2-all<br />
Copyright &copy; 2019, <a href="http://pocoproject.org/" target="_blank">Applied Informatics Software Engineering GmbH and Contributors</a></p>

</div>

</div>
</body>
</html>
